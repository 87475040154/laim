import{a2 as B}from"./app-DVvTTSt_.js";var y={},Y;function L(){if(Y)return y;Y=1,Object.defineProperty(y,"__esModule",{value:!0});var t=B();const h=Symbol(),u=new class{events;ymapReady;scriptIsNotAttached;pluginInstalledGlobal;constructor(){this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0,this.pluginInstalledGlobal=!1}$on(e,n){return this.events[e]||(this.events[e]=[]),this.events[e].push(n),()=>{this.events[e]=this.events[e].filter((s=>n!==s))}}$emit(e){const n=this.events[e];n&&n.forEach((s=>s()))}};function v(e){return new Promise(((n,s)=>{if(window.ymaps)return u.ymapReady||(u.ymapReady=!0,u.$emit("scriptIsLoaded")),n(!0);if(document.getElementById("vue-yandex-maps-script"))return void u.$on("scriptIsLoaded",n);const d=document.createElement("SCRIPT"),{apiKey:o="",lang:i="ru_RU",version:r="2.1",coordorder:l="latlong",debug:m=!1,enterprise:c=!1}=e,p=`https://${c?"enterprise.":""}api-maps.yandex.ru/${r}/?${`lang=${i}${o&&`&apikey=${o}`}&mode=${m?"debug":"release"}&coordorder=${l}`}`;d.setAttribute("src",p),d.setAttribute("async",""),d.setAttribute("defer",""),d.setAttribute("id","vue-yandex-maps-script"),document.head.appendChild(d),u.scriptIsNotAttached=!1,d.onload=(a=>()=>{ymaps.ready((()=>{u.ymapReady=!0,u.$emit("scriptIsLoaded"),a(!0)}))})(n),d.onerror=s}))}const j=e=>Array.isArray(e)?e.map(j):+e,O=["actionbegin","actionbreak","actionend","actiontick","actiontickcomplete","balloonclose","balloonopen","boundschange","click","contextmenu","dblclick","destroy","hintclose","hintopen","marginchange","mousedown","mouseenter","mouseleave","mousemove","mouseup","multitouchend","multitouchmove","multitouchstart","optionschange","sizechange","typechange","wheel"],x=["balloonclose","balloonopen","beforedrag","beforedragstart","click","contextmenu","dblclick","drag","dragend","dragstart","editorstatechange","geometrychange","hintclose","hintopen","mapchange","mousedown","mouseenter","mouseleave","mousemove","mouseup","multitouchend","multitouchmove","multitouchstart","optionschange","overlaychange","parentchange","propertieschange","wheel"];function g(e,n=!1){let s,d,o=[],i=[];return{addGeoObject:(r,l)=>{o.push(n?l:r),clearTimeout(s),s=window.setTimeout((()=>{e(o,"add"),o=[]}))},deleteGeoObject:(r,l)=>{i.push(n?l:r),clearTimeout(d),d=window.setTimeout((()=>{e(i,"remove"),i=[]}))}}}var G=t.defineComponent({name:"YandexMap",props:{coordinates:{type:Array,required:!0},zoom:{type:Number,default:10},bounds:{type:Array,default:null},behaviors:{type:Array,default:null},controls:{type:Array,default:null},detailedControls:{type:Object,default:null},events:{type:Array,default:()=>["click"],validator:e=>e.every((n=>O.includes(n)))},mapType:{type:String,default:"map"},settings:{type:Object,default:()=>({})},panOptions:{type:Object,default:void 0},options:{type:Object,default:()=>({})}},emits:[...O,"geo-objects-updated","created"],setup(e,{emit:n,slots:s,expose:d}){const o=t.ref(!1),i=u.pluginInstalledGlobal&&t.inject("pluginOptions")||{};let r;const l=`yandexMap${Math.round(1e5*Math.random())}`,{addGeoObject:m,deleteGeoObject:c}=g(((a,b)=>{r&&a.length&&(a.forEach((f=>r?.geoObjects[b](f))),n("geo-objects-updated",r.geoObjects))}));t.provide(h,{addGeoObject:m,deleteGeoObject:c});const p=()=>{o.value=!0,r=new ymaps.Map(l,{center:e.coordinates,zoom:e.zoom,bounds:e.bounds,behaviors:e.behaviors,controls:e.controls,type:`yandex#${e.mapType}`},e.options),e.events.forEach((a=>r?.events?.add(a,(b=>n(a,b))))),e.detailedControls&&Object.keys(e.detailedControls).forEach((a=>{r?.controls.remove(a),r?.controls.add(a,e.detailedControls?.[a])})),n("created",r)};return u.scriptIsNotAttached&&v({...i,...e.settings}),u.ymapReady?ymaps.ready(p):u.$on("scriptIsLoaded",p),d(r),t.watch((()=>e.coordinates),(a=>r?.panTo(a,e.panOptions))),t.watch((()=>e.zoom),(a=>r?.setZoom(a))),t.watch((()=>e.bounds),(a=>r?.setBounds(a))),t.watch((()=>e.mapType),(a=>r?.setType(a))),()=>t.h("section",{class:"yandex-container","data-test":"map"},[t.h("div",{id:l,style:"min-height: 100%;"}),o.value&&t.h("div",{style:"display: none;"},[s.default?.()])])}}),M=t.defineComponent({name:"YandexMarker",props:{coordinates:{type:Array,required:!0},markerId:{type:[String,Number],required:!0},properties:{type:Object,default:()=>({})},options:{type:Object,default:null},type:{type:String,default:"Point"},radius:{type:Number,default:null},events:{type:Array,default:()=>["click"],validator:e=>e.every((n=>x.includes(n)))}},emits:[...x],setup(e,{emit:n,slots:s,expose:d}){const{addGeoObject:o,deleteGeoObject:i}=t.inject(h)||{},r=t.computed((()=>e.coordinates.map(j))),l=t.ref(!1),m={geometry:{type:e.type,coordinates:r.value,radius:e.radius},properties:{...e.properties,markerId:e.markerId}},c=s.component?.().length?ymaps.templateLayoutFactory.createClass(`<div id="balloon-${e.markerId}" class="yandex-balloon"><div>`,{build(){c.superclass.build.call(this),l.value=!0},clear(){l.value=!1,c.superclass.clear.call(this)}}):null,p={balloonContentLayout:c,...e.options},a=new ymaps.GeoObject(m,p);e.events.forEach((f=>a.events?.add(f,(q=>n(f,q))))),t.provide("marker",a);const b={...m,options:p};return t.onMounted((()=>{o(a,b)})),t.onBeforeUnmount((()=>{i(a,b)})),t.watch((()=>e.coordinates),(f=>{a.geometry?.setCoordinates?.(f)})),d(a),s.component?.().length?()=>l.value&&t.h(t.Teleport,{to:`#balloon-${e.markerId}`},[s.component?.()]):()=>s.default?.()}}),w=t.defineComponent({name:"YandexGeoObjectCollection",props:{options:{type:Object,default:()=>({})}},emits:["geo-objects-updated"],setup(e,{emit:n,expose:s,slots:d}){const o=new ymaps.GeoObjectCollection({},e.options),{addGeoObject:i,deleteGeoObject:r}=t.inject(h)||{},{addGeoObject:l,deleteGeoObject:m}=g(((c,p)=>{o&&c.length&&(c.forEach((a=>o[p](a))),n("geo-objects-updated",o))}));return t.provide(h,{addGeoObject:l,deleteGeoObject:m}),t.onMounted((()=>{i(o)})),t.onBeforeUnmount((()=>{r(o)})),s(o),()=>d.default?.()}}),C=t.defineComponent({name:"YandexClusterer",props:{options:{type:Object,default:()=>({})}},emits:["geo-objects-updated"],setup(e,{emit:n,expose:s,slots:d}){const o=new ymaps.Clusterer(e.options),{addGeoObject:i,deleteGeoObject:r}=t.inject(h)||{},{addGeoObject:l,deleteGeoObject:m}=g(((c,p)=>{o&&c.length&&(o[p](c),n("geo-objects-updated",o))}));return t.provide(h,{addGeoObject:l,deleteGeoObject:m}),t.onMounted((()=>{i(o)})),t.onBeforeUnmount((()=>{r(o)})),s(o),()=>d.default?.()}}),k=t.defineComponent({name:"YandexObjectManager",props:{options:{type:Object,default:()=>({})}},emits:["geo-objects-updated"],setup(e,{emit:n,expose:s,slots:d}){const o=new ymaps.ObjectManager(e.options),{addGeoObject:i,deleteGeoObject:r}=t.inject(h)||{},{addGeoObject:l,deleteGeoObject:m}=g(((c,p)=>{if(!o||!c.length)return;const a=c.map((b=>({type:"Feature",id:b.properties.markerId,geometry:b.geometry,properties:b.properties,options:b.options})));o[p](a),n("geo-objects-updated",o)}),!0);return t.provide(h,{addGeoObject:l,deleteGeoObject:m}),t.onMounted((()=>{i(o)})),t.onBeforeUnmount((()=>{r(o)})),s(o),()=>d.default?.()}});let I;const $=v,A=G,T=M,E=w,R=C,N=k;var _={install:(e,n)=>{I||(I=!0,u.pluginInstalledGlobal=!0,e.provide("pluginOptions",n),e.component("YandexMap",G),e.component("YandexMarker",M),e.component("YandexCollection",w),e.component("YandexClusterer",C),e.component("YandexObjectManager",k))}};return y.YandexClusterer=R,y.YandexCollection=E,y.YandexMap=A,y.YandexMarker=T,y.YandexObjectManager=N,y.default=_,y.loadYmap=$,y}var S=L();export{S as v};
