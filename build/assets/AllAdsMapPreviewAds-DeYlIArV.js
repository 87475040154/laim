import{_ as C,c as r,o,a as t,w as d,d as l,T as c,b as n,r as i,f as y,F as v,u}from"./app-DVvTTSt_.js";import{a as w}from"./AdsPreviewComponent-CHZfV-Gy.js";import"./images-DnLiIPx2.js";import"./ads-DDty5fC4.js";import"./KZLocation-DLYATfpV.js";const S={name:"YandexMapClusterShowAds",components:{adsPreviewComponent:w},data(){return{authStore:u(),yandexMapClusterShowAdsAnimation:!1,query:!1,ads_arr:[],nextCursor:null,isFirstLoad:!0,isLastLoad:!1}},methods:{getAds(){this.query||(this.query=!0,axios.get("getAllAdsInYandexCluster",{params:{cursor:this.nextCursor,user_id:u().check?u().user.id:0,table_name:this.$route.params.table_name,arr_ads_id:JSON.parse(localStorage.getItem("mapClusterAdsId"))}}).then(e=>{this.query=!1,this.isFirstLoad?(this.ads_arr=e.data.ads.data,this.isFirstLoad=!1):this.nextCursor!==null&&(this.ads_arr=[...this.ads_arr,...e.data.ads.data]),e.data.ads.next_cursor==null?this.isLastLoad=!0:this.isLastLoad=!1,this.nextCursor=e.data.ads.next_cursor}).catch(e=>{this.query=!1}))}},mounted(){this.yandexMapClusterShowAdsAnimation=!0,document.querySelector(":root").classList.add("PATCH_modal"),localStorage.getItem("mapClusterAdsId")!=null?this.getAds():this.$router.back()},beforeRouteLeave(e,s,_){this.yandexMapClusterShowAdsAnimation=!1,setTimeout(()=>{_()},350)}},b={key:0,class:"yandexMapClusterShowAds__wrapper"},k={class:"yandexMapClusterShowAds__block"},M={class:"yandexMapClusterShowAds__header"},g={class:"yandexMapClusterShowAds__body"},L={key:0,class:"d-flex justify-content-center py-1"};function q(e,s,_,I,a,p){const m=i("v-icon"),h=i("v-btn"),A=i("ads-preview-component"),f=i("router-view");return o(),r(v,null,[t(c,{name:"yandexMapClusterShowAds__animation-backdrop"},{default:d(()=>[a.yandexMapClusterShowAdsAnimation?(o(),r("div",{key:0,class:"yandexMapClusterShowAds__backdrop",onClick:s[0]||(s[0]=x=>e.$router.back())})):l("",!0)]),_:1}),t(c,{name:"yandexMapClusterShowAds__animation-wrapper"},{default:d(()=>[a.yandexMapClusterShowAdsAnimation?(o(),r("div",b,[n("div",k,[n("div",M,[t(h,{role:"button",icon:"",size:"small",variant:"text",class:"mx-1",dark:"",onClick:s[1]||(s[1]=x=>e.$router.back())},{default:d(()=>[t(m,{size:"large"},{default:d(()=>[...s[2]||(s[2]=[y("mdi-close",-1)])]),_:1})]),_:1})]),n("div",g,[t(A,{ads_arr:a.ads_arr,onGetAds:p.getAds},null,8,["ads_arr","onGetAds"]),a.query?(o(),r("div",L,[...s[3]||(s[3]=[n("div",{class:"spinner-border spinner-border-sm",style:{color:"var(--app-text-color)"},role:"status"},null,-1)])])):l("",!0),t(f)])])])):l("",!0)]),_:1})],64)}const B=C(S,[["render",q],["__scopeId","data-v-b358d77c"]]);export{B as default};
