import{a7 as m}from"./app-DVvTTSt_.js";var j=Object.defineProperty,O=Object.prototype.hasOwnProperty,f=Object.getOwnPropertySymbols,A=Object.prototype.propertyIsEnumerable,d=(t,e,s)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,i=(t,e)=>{for(var s in e||(e={}))O.call(e,s)&&d(t,s,e[s]);if(f)for(var s of f(e))A.call(e,s)&&d(t,s,e[s]);return t};const c=t=>t===void 0,p=t=>Array.isArray(t),y=t=>t&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.slice=="function",u=(t,e,s,a)=>((e=e||{}).indices=!c(e.indices)&&e.indices,e.nullsAsUndefineds=!c(e.nullsAsUndefineds)&&e.nullsAsUndefineds,e.booleansAsIntegers=!c(e.booleansAsIntegers)&&e.booleansAsIntegers,e.allowEmptyArrays=!c(e.allowEmptyArrays)&&e.allowEmptyArrays,s=s||new FormData,c(t)||(t===null?e.nullsAsUndefineds||s.append(a,""):(r=>typeof r=="boolean")(t)?e.booleansAsIntegers?s.append(a,t?1:0):s.append(a,t):p(t)?t.length?t.forEach(((r,n)=>{const l=a+"["+(e.indices?n:"")+"]";u(r,e,s,l)})):e.allowEmptyArrays&&s.append(a+"[]",""):(r=>r instanceof Date)(t)?s.append(a,t.toISOString()):!(r=>r===Object(r))(t)||(r=>y(r)&&typeof r.name=="string"&&(typeof r.lastModifiedDate=="object"||typeof r.lastModified=="number"))(t)||y(t)?s.append(a,t):Object.keys(t).forEach((r=>{const n=t[r];if(p(n))for(;r.length>2&&r.lastIndexOf("[]")===r.length-2;)r=r.substring(0,r.length-2);u(n,e,s,a?a+"["+r+"]":r)}))),s);var w={serialize:u};function h(t){if(t===null||typeof t!="object")return t;const e=Array.isArray(t)?[]:{};return Object.keys(t).forEach((s=>{e[s]=h(t[s])})),e}function b(t){return Array.isArray(t)?t:[t]}function g(t){return t instanceof File||t instanceof Blob||t instanceof FileList||typeof t=="object"&&t!==null&&Object.values(t).find((e=>g(e)))!==void 0}class E{constructor(){this.errors={},this.errors={}}set(e,s){typeof e=="object"?this.errors=e:this.set(i(i({},this.errors),{[e]:b(s)}))}all(){return this.errors}has(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}hasAny(...e){return e.some((s=>this.has(s)))}any(){return Object.keys(this.errors).length>0}get(e){if(this.has(e))return this.getAll(e)[0]}getAll(e){return b(this.errors[e]||[])}only(...e){const s=[];return e.forEach((a=>{const r=this.get(a);r&&s.push(r)})),s}flatten(){return Object.values(this.errors).reduce(((e,s)=>e.concat(s)),[])}clear(e){const s={};e&&Object.keys(this.errors).forEach((a=>{a!==e&&(s[a]=this.errors[a])})),this.set(s)}}class o{constructor(e={}){this.originalData={},this.busy=!1,this.successful=!1,this.recentlySuccessful=!1,this.recentlySuccessfulTimeoutId=void 0,this.errors=new E,this.progress=void 0,this.update(e)}static make(e){return new this(e)}update(e){this.originalData=Object.assign({},this.originalData,h(e)),Object.assign(this,e)}fill(e={}){this.keys().forEach((s=>{this[s]=e[s]}))}data(){return this.keys().reduce(((e,s)=>i(i({},e),{[s]:this[s]})),{})}keys(){return Object.keys(this).filter((e=>!o.ignore.includes(e)))}startProcessing(){this.errors.clear(),this.busy=!0,this.successful=!1,this.progress=void 0,this.recentlySuccessful=!1,clearTimeout(this.recentlySuccessfulTimeoutId)}finishProcessing(){this.busy=!1,this.successful=!0,this.progress=void 0,this.recentlySuccessful=!0,this.recentlySuccessfulTimeoutId=setTimeout((()=>{this.recentlySuccessful=!1}),o.recentlySuccessfulTimeout)}clear(){this.errors.clear(),this.successful=!1,this.recentlySuccessful=!1,this.progress=void 0,clearTimeout(this.recentlySuccessfulTimeoutId)}reset(){Object.keys(this).filter((e=>!o.ignore.includes(e))).forEach((e=>{this[e]=h(this.originalData[e])}))}get(e,s={}){return this.submit("get",e,s)}post(e,s={}){return this.submit("post",e,s)}patch(e,s={}){return this.submit("patch",e,s)}put(e,s={}){return this.submit("put",e,s)}delete(e,s={}){return this.submit("delete",e,s)}submit(e,s,a={}){return this.startProcessing(),a=i({data:{},params:{},url:this.route(s),method:e,onUploadProgress:this.handleUploadProgress.bind(this)},a),e.toLowerCase()==="get"?a.params=i(i({},this.data()),a.params):(a.data=i(i({},this.data()),a.data),g(a.data)&&!a.transformRequest&&(a.transformRequest=[r=>w.serialize(r)])),new Promise(((r,n)=>{(o.axios||m).request(a).then((l=>{this.finishProcessing(),r(l)})).catch((l=>{this.handleErrors(l),n(l)}))}))}handleErrors(e){this.busy=!1,this.progress=void 0,e.response&&this.errors.set(this.extractErrors(e.response))}extractErrors(e){return e.data&&typeof e.data=="object"?e.data.errors?i({},e.data.errors):e.data.message?{error:e.data.message}:i({},e.data):{error:o.errorMessage}}handleUploadProgress(e){this.progress={total:e.total,loaded:e.loaded,percentage:Math.round(100*e.loaded/e.total)}}route(e,s={}){let a=e;return Object.prototype.hasOwnProperty.call(o.routes,e)&&(a=decodeURI(o.routes[e])),typeof s!="object"&&(s={id:s}),Object.keys(s).forEach((r=>{a=a.replace(`{${r}}`,s[r])})),a}onKeydown(e){const s=e.target;s.name&&this.errors.clear(s.name)}}o.routes={},o.errorMessage="Something went wrong. Please try again.",o.recentlySuccessfulTimeout=2e3,o.ignore=["busy","successful","errors","progress","originalData","recentlySuccessful","recentlySuccessfulTimeoutId"];export{o as g};
