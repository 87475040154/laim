<template>

    <!-- üîπ –•–µ–¥–µ—Ä - –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header class="header">

        <!-- üî∏ –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫ -->
        <div class="header__top-block">

            <!-- üè† –õ–æ–≥–æ—Ç–∏–ø -->
            <button @click="$router.push('/allAds/Kvartira')" class="header__top-block-logo">
                <img src="/img/siteImg/allImg/logo.svg" width="30" height="30" alt="–õ–æ–≥–æ—Ç–∏–ø"/>
            </button>

            <!-- –í css —Ä–∞—Å—Ç—è–Ω–µ–º —ç—Ç–æ—Ç –±–ª–æ–∫ –Ω–∞ –≤—Å–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ -->
            <div class="spacer"></div>

            <!-- üî∏ –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - –ò–∑–±—Ä–∞–Ω–Ω–æ–µ, –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç, –ü–æ–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ -->
            <div class="header__top-block-right-group">

                <!-- ‚ù§Ô∏è –ö–Ω–æ–ø–∫–∞ "–ò–∑–±—Ä–∞–Ω–Ω—ã–µ", –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç -->
                <div v-if="authStore.check" class="actions">

                    <!-- –ö–Ω–æ–ø–∫–∞ - –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ -->
                    <button class="icon-btn" @click="getMyLikeAds = !getMyLikeAds">
                        <svg width="24" height="24" :fill="getMyLikeAds ? '#ff3b30' : '#fff'" viewBox="0 0 24 24">
                            <path v-if="getMyLikeAds"  d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5 c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                            <path v-else d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5 c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zM12 19.55l-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5 18.5 5 20 6.5 20 8.5c0 2.89-3.14 5.74-7.9 10.95l-.1.1z"/>
                        </svg>
                    </button>

                    <!-- üìã –ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è" -->
                    <button class="icon-btn" @click="$router.push({ name: 'userAds', params: { author_id: authStore.user.id } })">

                        <!-- üî∏ –ö–æ–ª-–≤–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É -->
                        <div v-if="getProjectDataStore.countReturnAds > 0" class="badge">
                            {{ getProjectDataStore.countReturnAds }}
                        </div>

                        <svg width="24" height="24" fill="#fff" viewBox="0 0 24 24">
                            <path d="M4 4h16v2H4zm0 7h16v2H4zm0 7h16v2H4z" />
                        </svg>
                    </button>

                    <!-- üë§ –ö–Ω–æ–ø–∫–∞ "–ú–æ–π –∞–∫–∫–∞—É–Ω—Ç" -->
                    <button class="icon-btn" @click="$router.push({ name: 'myAccount' })">
                        <svg width="24" height="24" fill="#fff" viewBox="0 0 24 24">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2 c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </button>

                </div>

                <!-- ‚ûï –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ" -->
                <button @click="authStore.check ? $router.push({ name: 'addAdsMenu' }) : $router.push({ name: route.name + 'Auth' })" class="submit-btn" >
                    {{ $t('headerSubmitAnAd') }}
                </button>

            </div>

        </div>

        <!-- üî∏ –ù–∏–∂–Ω–∏–π –±–ª–æ–∫ - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –º–µ–Ω—é -->
        <nav class="header__menu">
            <div v-for="(item, i) in categories" :key="i" class="header__menu-item" @click="$router.replace(item.link)">
                <div class="header__menu-icon" :class="{ active: $route.params.table_name === item.name }">
                    <img :src="item.icon" :alt="item.label" width="45" height="45"/>
                    <small>{{ $t(item.label) !== item.label ? $t(item.label) : item.fallback }}</small>
                </div>
            </div>
        </nav>

    </header>

</template>


<script setup>
import { ref, watch } from 'vue'
import { useLocalStorage  } from '@vueuse/core'
import { useRouter, useRoute } from 'vue-router'

// üß≠ –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä
const router = useRouter()
const route = useRoute()

// üè™ –ü–æ–¥–∫–ª—é—á–∞–µ–º Pinia-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞
import { useAuthStore } from '../stores/auth'
import { useGetProjectDataStore } from '../stores/getProjectData'
import { useAppInstallStore } from '../stores/AppInstall'

const authStore = useAuthStore()
const getProjectDataStore = useGetProjectDataStore()
const appInstallStore = useAppInstallStore()

// —Å–æ–∑–¥–∞—ë–º —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π ref, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å localStorage
const getMyLikeAds = useLocalStorage('getMyLikeAds', false)

// üóÇÔ∏è –ú–µ–Ω—é –∫–∞—Ç–µ–≥–æ—Ä–∏–π
const categories = [
    { name: 'Kvartira', label: 'headerMenuApartments', fallback: '–ö–≤–∞—Ä—Ç–∏—Ä—ã', icon: '/img/siteImg/menuImg/1.svg', link: '/allAds/Kvartira' },
    { name: 'Obshejitie', label: 'headerMenuHostels', fallback: '–û–±—â–µ–∂–∏—Ç–∏—è', icon: '/img/siteImg/menuImg/2.svg', link: '/allAds/Obshejitie' },
    { name: 'Dom', label: 'headerMenuHouses', fallback: '–î–æ–º–∞', icon: '/img/siteImg/menuImg/3.svg', link: '/allAds/Dom' },
    { name: 'Ofis', label: 'headerMenuOffice', fallback: '–û—Ñ–∏—Å—ã', icon: '/img/siteImg/menuImg/4.svg', link: '/allAds/Ofis' },
    { name: 'Zdanie', label: 'headerMenuBuilding', fallback: '–ó–¥–∞–Ω–∏—è', icon: '/img/siteImg/menuImg/5.svg', link: '/allAds/Zdanie' },
    { name: 'Magazin', label: 'headerMenuShops', fallback: '–ú–∞–≥–∞–∑–∏–Ω—ã', icon: '/img/siteImg/menuImg/6.svg', link: '/allAds/Magazin' },
    { name: 'Prombaza', label: 'headerMenuBases', fallback: '–ü—Ä–æ–º–±–∞–∑—ã', icon: '/img/siteImg/menuImg/7.svg', link: '/allAds/Prombaza' },
    { name: 'Prochaya', label: 'headerMenuOther', fallback: '–ü—Ä–æ—á–∞—è', icon: '/img/siteImg/menuImg/8.svg', link: '/allAds/Prochaya' },
    { name: 'Business', label: 'headerMenuBusiness', fallback: '–ë–∏–∑–Ω–µ—Å', icon: '/img/siteImg/menuImg/9.svg', link: '/allAds/Business' }
]

</script>


<style scoped>
.header {
    position: relative;
    top: 0;
    left: 0;
    right: 0;
    background: #eeeeee;
    will-change: transform;
}

.header__top-block {
    display: none;
    background: rgb(63 63 69);
    color: #fff;
    padding: 8px 12px;
}
.header__top-block-logo {
    display: flex;
    align-items: center;
    border: none;
    background: none;
    cursor: pointer;
}
.spacer {
    flex: 1;
}
.header__top-block-right-group {
    display: flex;
    align-items: center;
    gap: 20px; /* üîπ –Ω–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–∏–ª –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏ */
}
.actions {
    display: flex;
    align-items: center;
    gap: 16px; /* üîπ —á—É—Ç—å –±–æ–ª—å—à–µ –≤–æ–∑–¥—É—Ö–∞ –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–∞–º–∏ */
}
.icon-btn {
    position: relative;
    background: #19b07b; /* üîπ –ª—ë–≥–∫–∏–π —Ñ–æ–Ω –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—â—É—â–µ–Ω–∏—è */
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    border-radius: 10px; /* üîπ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è –∫–∞–∫ —É iOS-style –∫–Ω–æ–ø–æ–∫ */
    transition: all 0.2s ease;
}
.icon-btn:hover {
    background: #4ae6b0; /* üîπ –ª—ë–≥–∫–∏–π hover —ç—Ñ—Ñ–µ–∫—Ç */
    transform: translateY(-2px);
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
}
.icon-btn svg {
    width: 22px;
    height: 22px;
}
.badge {
    position: absolute;
    top: 2px;
    right: 2px;
    background: #ff3b30;
    color: #fff;
    font-size: 11px;
    padding: 1px 4px;
    border-radius: 10px;
    font-weight: 700;
    line-height: 1;
    min-width: 16px;
    text-align: center;
}
.submit-btn {
    background: #fc3441;
    border: none;
    color: #fff;
    padding: 8px 14px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
}
.submit-btn:hover {
    opacity: 0.9;
}

.header__menu {
    display: flex;
    gap: 14px;
    padding: 12px 10px 16px;
    overflow-x: auto;
    scrollbar-width: none; /* Firefox */
}
.header__menu::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
}
.header__menu-item {
    flex: 0 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    user-select: none;
    transition: transform 0.25s ease;
}
.header__menu-item:hover {
    transform: translateY(-3px) scale(1.03);
}
.header__menu-icon {
    width: 84px;
    height: 84px;
    border-radius: 18px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: #f8f8f8;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    transition: all 0.25s ease;
    padding: 6px 0;
}
.header__menu-icon:hover {
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.1);
}
.header__menu-icon img {
    margin-bottom: 6px;
    width: 48px;
    height: 48px;
    object-fit: contain;
}
.header__menu-icon small {
    font-size: 13px;
    color: #333;
    text-align: center;
    line-height: 1.2;
    transition: color 0.25s ease;
}
.header__menu-icon.active {
    background: linear-gradient(135deg, #19b07b, #1fc79b);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}
.header__menu-icon.active small {
    color: #fff;
}





/* üìû –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã (‚â•480px) */
@media (min-width: 480px) {

}

/* üì± –°—Ä–µ–¥–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã (‚â•576px) */
@media (min-width: 576px) {

}

/* üíº –ü–ª–∞–Ω—à–µ—Ç—ã (‚â•768px) */
@media (min-width: 768px) {

}

/* –ø—Ä–∏ —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞ ‚â•823px ‚Äî –ø–æ —Ü–µ–Ω—Ç—Ä—É */
@media (min-width: 823px) {
    .header__menu {
        justify-content: center;
        margin-top: 20px;
    }
}

/* üíª –ù–æ—É—Ç–±—É–∫–∏ (‚â•992px) */
@media (min-width: 992px) {
    .header__top-block{
        display: flex;
        align-items: center;
    }

    .header__menu-icon img {
        width: 40px;
        height: 40px;
    }
}

/* üñ• –î–µ—Å–∫—Ç–æ–ø—ã (‚â•1200px) */
@media (min-width: 1200px) {

}

/* üñ•üíé –ë–æ–ª—å—à–∏–µ –º–æ–Ω–∏—Ç–æ—Ä—ã (‚â•1400px) */
@media (min-width: 1400px) {

}

/* üñ• Ultra-wide 2K (‚â•1600px) */
@media (min-width: 1600px) {

}

/* üñ• 4K –¥–∏—Å–ø–ª–µ–∏ (‚â•1920px) */
@media (min-width: 1920px) {

}
</style>
<!--425-->
